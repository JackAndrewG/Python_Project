{% extends 'app1/base.html' %}
{% block content %}
<section id="call-to-action">
<div class="container">
  <!-- Cambio en modelos: codigo_cancha > unico -->
  {% if messages %}
    <div class="row">
      <div class="col-sm-12">
        {% for message in messages %}
          <p {% if message.tags == "error" %} class="alert alert-danger" {% endif %}>{{message }}
          </p>
        {% endfor %}
      </div>
    </div>
  {% endif %}
  <div class="row">
    <div class="col-md-4">
      <h2>Nro de reservas: {{ nro_reservas }}</h2>
    </div>
    <div class="col-md-5">
      <h2>Total de ingresos: ${{ total_ingresos }}</h2>
    </div>
  </div>
  
    <form method="GET" action="/reporte_reservas/"> {% csrf_token %}
      <div class="row">
        <div class="col-md-4">
          Buscar por mes y año:
        </div>
        <div class="col-md-7">
          Buscar por rango de fechas:
        </div>
      </div>
         
      <div class="row">  
        <div class="col-md-4">
          <input type="month" name="buscar_mes">
          <button type="submit" class="btn btn-info">Consultar</button>
        </div>
        <div class="col-md-7">
          <label for="buscar_desde">Desde:</label>
          <input name="buscar_desde" type="date">
          <label for="fecha_hasta">Hasta:</label>
          <input name="buscar_hasta" type="date">
          <button type="submit" class="btn btn-info">Consultar</button>
        </div>
      </div>
       
        
      
    </form>
<br>
  <div class="table-responsive">
    <table class="table table-striped table-dark">
      <caption style="color: #f8f9fa">Lista de reservas</caption>
      <thead>
        <tr>
          <th scope="col">Código</th>
          <th scope="col">Usuario</th>
          <th scope="col">Cancha</th>
          <th scope="col">Fecha reserva</th>
          <th scope="col">Hora inicio</th>
          <th scope="col">Hora fin</th>
          <th scope="col">Valor unitario</th>
          <th scope="col">Valor total</th>
          <th scope="col">Estado de reserva</th>
        </tr>
      </thead>
      <tbody>
        {% for reserva in reservas %}
        <tr>
          <td><a href="{% url 'reserva_enlace' pk=reserva.pk %}">0000{{ reserva.id }}</a></td>
          <td>{{ reserva.usuario }}</td>
          <td>{{ reserva.cancha }}</td>
          <td>{{ reserva.fecha_reserva }}</td>
          <td>{{ reserva.hora_inicio }}</td>
          <td>{{ reserva.hora_fin }}</td>
          <td>{{ reserva.valor_unitario }}</td>
          <td>{{ reserva.valor_total }}</td>
          <td> 
            {% if reserva.estado_reserva %} 
              Activa
            {%else%}
              Inactiva
            {%endif%}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    
  </div>
  
</div>
</section>
{% endblock %}